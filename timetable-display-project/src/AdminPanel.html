<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Panel - Timetable System</title>
    <link rel="stylesheet" href="../styles/styles.css">
    <!-- Add jsPDF library for PDF generation -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.28/jspdf.plugin.autotable.min.js"></script>
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar">
        <a class="navbar-brand" href="#">Timetable Admin</a>
        <div class="navbar-nav">
            <a href="DisplayTimetable.html" class="nav-link">View Timetable</a>
            <a href="/admin" class="nav-link">Admin Panel</a>
            <a href="#" id="logoutBtn" class="nav-link">Logout</a>
        </div>
    </nav>

    <div class="container">
        <h1>Timetable Management Panel</h1>
        
        <div id="sessionConfig" class="table-container">
            <h3>Configure Available Sessions</h3>
            <div class="input-group">
                <label for="startYear">Start Year:</label>
                <select id="startYear">
                    <option value="2021">2021</option>
                    <option value="2022">2022</option>
                    <option value="2023">2023</option>
                    <option value="2024">2024</option>
                </select>
            </div>
            <div class="input-group">
                <label for="numberOfSessions">Number of Sessions:</label>
                <input type="number" id="numberOfSessions" min="1" max="10" value="4">
            </div>
            <button id="updateSessionsBtn">Update Available Sessions</button>
        </div>
        
        <div id="adminPanel">
            <h1>Admin Timetable Management</h1>

            <!-- Add New Entry Section -->
            <form id="timetableForm">
                <h3>Add New Timetable Entry</h3>
                <div class="input-group">
                    <label for="session">Select Week:</label>
                    <select id="session" name="session" required>
                        <option value="1">Week 1</option>
                        <option value="2">Week 2</option>
                        <option value="3">Week 3</option>
                        <option value="4">Week 4</option>
                    </select>
                </div>
                <div class="input-group">
                    <label for="courseName">Course Name:</label>
                    <input type="text" id="courseName" name="courseName" required placeholder="e.g., CS-101">
                </div>
                <div class="input-group">
                    <label>Select Days:</label>
                    <div class="checkbox-group">
                        <label><input type="checkbox" name="day" value="Monday"> Monday</label>
                        <label><input type="checkbox" name="day" value="Tuesday"> Tuesday</label>
                        <label><input type="checkbox" name="day" value="Wednesday"> Wednesday</label>
                        <label><input type="checkbox" name="day" value="Thursday"> Thursday</label>
                        <label><input type="checkbox" name="day" value="Friday"> Friday</label>
                    </div>
                </div>
                <div class="input-group time-slots">
                    <label>Time Slot:</label>
                    <div class="time-input-group">
                        <div>
                            <label for="startTime">Start Time:</label>
                            <input type="time" id="startTime" name="startTime" required>
                        </div>
                        <div>
                            <label for="endTime">End Time:</label>
                            <input type="time" id="endTime" name="endTime" required>
                        </div>
                    </div>
                </div>
                <button type="submit">Add Entry</button>
            </form>

            <!-- Entries Section -->
            <div class="entries-section">
                <h3>Current Timetable Entries</h3>
                <div class="table-container">
                    <table class="table">
                        <thead>
                            <tr>
                                <th>Day</th>
                                <th>Session</th>
                                <th>Course</th>
                                <th>Time Slot</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="entriesList">
                            <!-- Entries will be dynamically generated here -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <div class="button-container">
            <button id="generatePdf" class="pdf-btn">Generate PDF</button>
            <button id="clearAllEntries" class="danger">Delete All Entries</button>
        </div>
    </div>

    <script>
        // Auto-update year options on page load
        document.addEventListener('DOMContentLoaded', function() {
            // The functionality has been moved to timetable.js
            // No duplicate event handlers needed here
        });
    </script>
    
    <!-- Changed from timetable.java to timetable.js since we need JavaScript, not Java for browser -->
    <script src="../scripts/timetable.js"></script>
</body>
</html>